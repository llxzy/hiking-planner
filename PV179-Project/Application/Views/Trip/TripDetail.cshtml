@model Application.Models.TripModels.TripModel;
@{
    ViewData["Title"] = Model.Title;
}

<link rel="stylesheet" href="~/css/custom.css" />

<h1>
    @Html.DisplayFor(model => model.Title)
</h1>

@if (User.Identity.IsAuthenticated) //TODO && int.Parse(User.Identity.Name) == Model.Author.Id)
{
    <button class="trip-detail-button">
        Edit
    </button>

    using (Html.BeginForm("DeleteTrip", "Trip", new {Id = Model.Id}))
    {
        <input type="submit" value="Delete" class="btn btn-primary"/>
    }
}

<div>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Description)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Description)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.StartDate)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.StartDate)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Done)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Done)
        </dd>
    </dl>
    <h2 class="trip-subheader">
        Locations
    </h2>
    <ol type="1">
        @{
            foreach (var t in Model.TripLocations)
            {
                <li class="trip-location-info">
                    @t.AssociatedLocation.Name @t.ArrivalTime
                </li>
            }
        }

    </ol>

    <h2 class="trip-subheader">
        @Html.DisplayNameFor(model => model.Reviews)
    </h2>

    <a class="create-button" asp-area="" asp-controller="Challenge" asp-action="CreateChallenge">
            <strong>Add review</strong>
    </a>
    @{
        foreach (var review in Model.Reviews)
        {
        <div class="rd">

            <p class="rp">
                <strong>@review.Author.Name</strong> (@review.Author.MailAddress)
            </p>

            <p class="review-text">
                @review.Text
            </p>
            <a class="review-vote" asp-area="" asp-controller="Review" asp-action="Upvote">
                🡅 @review.UpvoteCount
            </a>
            <a class="review-vote" asp-area="" asp-controller="Review" asp-action="Downvote">
                🡇 @review.DownvoteCount
            </a>

        </div>
        }
    }
</div>

